# OSI 7 layer에 대해 알아보자

## 계층 구조로 네트워크의 기능을 분리

우리가 네트워크를 통해 리소스를 주고받기 위해서는 약속된 `통신 방법`이 있어야 합니다.

> 이런 통신 방법을 `네트워크 프로토콜(network protocol)` 이라고 합니다.

그런데 네트워크를 통해 리소스를 주고받을 때 하나의 통신 방법으로 리소스를 주고 받으려면 많은 어려움이 존재할 것입니다. 이를 위해 네트워크를 `계층 구조`로 나누어 모듈화를 시켰습니다.

이 계층 구조로 모듈화 시킨 것이 `TCP/IP 4 Layer` , `OSI 7 Layer` 입니다.

## OSI 7 Layer

![image](https://github.com/todolist-team2/todo-max/assets/66981851/f4be8295-7559-4812-818d-f7f59e573049)

OSI 7 Layer는 이름에 맞게 7개의 계층으로 나누어져 있습니다. 각 계층에는 각각의 프로토콜이 존재하며 상위 레이어의 프로토콜은 하위 레이어의 프로토콜이 제공하는 기능을 사용해 동작합니다.

이제 각각에 대해 알아보겠습니다.

### Application Layer

애플리케이션 계층은 애플리케이션끼리 동작하는데 필요한 프로토콜을 제공해줍니다. 가장 대표적인 프로토콜이 `HTTP`입니다. 이외에도 DNS, SMTP, FTP 등이 존재합니다.

HTTP 프로토콜에서 송신자는 HTTP Request Message를 만들고 수신자는 이를 받습니다. 이 과정에서 Application Layer는 메시지를 어떻게 만드는지에만 관심이 있고 어떻게 수신지까지 보낼지는 관심이 없습니다. 왜냐하면 하위 레이어가 해줄 것을 기대하기 때문입니다.

다시 한 번 말하자면 상위 레이어가 하위 레이어의 기능을 이용하는 것을 확인할 수 있습니다.

### Presentation Layer

프레젠테이션 계층은 애플리케이션끼리 동작하는데 메시지의 포맷을 관리하는 역할을 합니다.

여기서 포맷은 다음과 같은 것들을 말합니다.

- 인코딩 ↔ 디코딩
- 압축 ↔ 압축 해제

예를 들어 송신측에서 문자열을 인코딩 했다면 수신측에서는 이를 디코딩해야 하는 것을 알 수 있습니다.

### Session Layer

세션 계층은 애플리케이션 간의 통신에서 세션을 관리하는 역할을 합니다.

네트워크 상에서 통신할 때 양쪽 host 간의 연결을 최초 수립하고, 끊어지지 않도록 유지시켜주는 역할을 합니다.

> 세션은 클라이언트와 서버간의 연결 상태를 의미합니다.
> ex. 클라이언트가 쿠팡에 접속해 물건을 선택해 장바구니에 담고 결제를 진행한 후, 창을 닫기 전까지의 상태

https://www.geeksforgeeks.org/session-layer-in-osi-model/

### Transport Layer

트랜스포트 계층은 애플리케이션 간의 통신을 담당합니다. 이 계층은 목적지까지 데이터를 전송하는 역할을 담당하기도 합니다. 여기서 어떻게 목적지까지 데이터를 전송할 것인지를 결정하는 프로토콜인 `TCP`, `UDP` 가 존재합니다.

> TCP : 안정적이며 신뢰성 있는 프로토콜
> UDP : 비신뢰성, 필수 기능만 제공

트랜스포트 계층은 데이터를 전달하는데 관심이 있지만, 어떻게 전송할 것인지는 관심이 없습니다. Network layer를 이용해 데이터를 전송할 뿐입니다.

### Network Layer

네트워크 계층은 데이터를 목적지까지 `어떻게` 전송할 것인지 결정하는 계층입니다. 그래서 네트워크 상에서 데이터를 전송할 때 `최적의 경로`를 설정하는 역할을 수행합니다. 이때 `IP주소` 를 기반으로 통신합니다.

![image](https://github.com/todolist-team2/todo-max/assets/66981851/2e0e5fcf-51b2-48b5-83a7-5e6609cd4293)

네트워크 계층도 마찬가지로 송신측과 수신측의 최적의 경로를 설정할 뿐이지 노드와 노드 사이에서 어떻게 데이터를 전송할 것인지는 관심이 없습니다. Data link layer를 이용하는 것입니다.

### Data link layer

데이터 링크 계층은 직접 연결된 노드들 간의 통신을 담당하는 계층입니다. `MAC 주소`를 기반으로 통신합니다.

### Physical layer

피지컬 계층은 데이터를 비트 단위로 전송하는 역할을 수행합니다.

![image](https://github.com/todolist-team2/todo-max/assets/66981851/edd1102f-bcf9-41af-b837-4cbfc705a013)

## 캡슐화 & 역캡슐화 (encapsulation & decapsulation)

송신측에서 데이터를 전송할 때 각 레이어를 거치며 레이어의 `헤더` 를 부가하게 되고 이를 받은 송신측 혹은 라우터는 `헤더` 를 폐기하며 데이터를 얻게 됩니다. 이런 과정을 캡슐화 & 역캡슐화라고 합니다.

## vs TCP/IP 4 Layer

![image](https://github.com/todolist-team2/todo-max/assets/66981851/cef6ed24-e40b-451a-b8e1-0c1e59ced64b)

TCP/IP 4 layer는 OSI 레이어를 간단하게 볼 수 있는 계층 모델입니다.

OSI의 5, 6, 7 계층을 Application layer로 나누고 4계층을 Transport layer, 3계층을 Internet layer, 1, 2 계층을 Network interface layer로 나눈 모델입니다.

## 왜 계층을 나누었을까?

이렇게 계층을 나눠놓은 이유는 네트워크 통신 중 문제가 생겼을 때 어느 문제가 생긴 부분만 보면 되고 개발을 진행할 때도 해당 레이어에만 집중할 수 있어 개발의 생산성이 높아지기 때문입니다.
